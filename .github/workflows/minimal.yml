name: ubuntu
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: cvmfs-contrib/github-action-cvmfs@v2
    - name: Test CernVM-FS
      run: |
        echo "### Dump default.local ###"
        cat /etc/cvmfs/default.local
        echo "### Test /cvmfs/cms.cern.ch ###"
        ls /cvmfs/cms.cern.ch
        echo "### /cvmfs/cms-opendata-conddb.cern.ch/ ###"
        ls /cvmfs/cms-opendata-conddb.cern.ch/
    - name: Run container
      run: |
        docker run -v $(pwd):/mnt/vol -v /cvmfs:/cvmfs:shared -w /home/cmsusr gitlab-registry.cern.ch/cms-cloud/cmssw-docker/cmssw_4_4_7-slc5_amd64_gcc434:2020-11-19-89e805d7 /bin/bash ls /cvmfs
     
